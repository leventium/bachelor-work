# Отчёт от 13.11.2023


## О чём?

Углубляемся в устройство процессоров перечисленных в прошлом отчёте, ищем
полезные для нас наработки на opencores.


## Результаты

### PicoRV32 - углубление

Сразу стоит отметить, что данное ядро является достаточно универсальным, так
как имеет много инструментов конфигурации под определенные задачи и требования.
Есть возможность отключения некоторого функционала для уменьшения размера ядра
или наоборот подключения для получения максимальной производительности.

PicoRV32 может быть сконфигурирован как ядро RV32E, RV32I, RV32IC, RV32IM или
RV32IMC и, при необходимости, содержит встроенный контроллер прерываний.

Этот процессор предназначен для использования в качестве вспомогательного
процессора в конструкциях FPGA и ASIC. Благодаря высокой максимальной частоте
он может быть интегрирован в большинство существующих конструкций без
пересечения тактовых частот. При работе на более низкой частоте он будет иметь
значительный временной провал и, таким образом, может быть добавлен в
конструкцию без ущерба для синхронизации.

Из особенностей можно выделить следующее:

- Небольшой (750-2000 LUT в архитектуре Xilinx 7-й серии)
- Высокая максимальная частота (250-450 МГц на ПЛИС Xilinx 7-й серии)
- Выбираемый интерфейс встроенной памяти или AXI4-Lite master
- Дополнительная поддержка IRQ (с использованием простого пользовательского ISA)
- Дополнительный интерфейс сопроцессора

Из интересных возможностей конфигурации можно выбирать между двухпортовой и
однопортовой реализацией регистрового файла. Первая обеспечивает лучшую
производительность, в то время как вторая приводит к уменьшению ядра.

Из сомнительных моментов можно выделить то, что функции обработки IRQ в PicoRV32
не соответствуют спецификации привилегированного ISA RISC-V. Вместо этого
используется небольшой набор очень простых пользовательских инструкций для
реализации обработки IRQ с минимальными затратами на оборудование.

Обзор архитектуры приводился на основе описания репозитория:  
<https://github.com/YosysHQ/picorv32>


### Алгоритмы шифрования

#### AES

С этим алгоритмом никаких подводных камней, есть лишь одна реализация –
Rijndael, которую мы и будем изучать. Также смогли найти подходящие для нас
реализации на Verilog и С, ~~которые будем заимствовать~~ на которые
можем опираться.

Полезные ссылки:

- <https://en.wikipedia.org/wiki/Advanced_Encryption_Standard>
- <https://opencores.org/projects/tiny_aes>
- <https://github.com/kokke/tiny-AES-c>


#### SHA

Тут уже не так всё ясно, у него есть несколько реализаций – SHA-2 (разработан
в АНБ, наиболее распространён) и SHA-3 (он же Keccak, разработан не в АНБ)
Нужно отметить, что сертифицированная реализация SHA на verilog это SHA-3,
но спецификация RISC-V Crypto требует SHA-2… ладно :(

Поэтому ищем ресурсы по SHA-2:

- <https://ru.wikipedia.org/wiki/SHA-2>
- <https://opencores.org/projects/sha_core>


#### Tiny AES - обзор

Одна из самых популярных реализаций алгоритма AES на Verilog, которая
сертифицирована opencores (https://opencores.org/projects/tiny_aes). Структура
проекта достаточно проста для понимания, интересующий нас реализация находится
в разделе trunk/rtl, основными смысловыми блоками являются раунды
шифрования/дешифрования и расширения ключей, в дальнейшем эти блоки используются
в модулях, реализующих сам алгоритм.
